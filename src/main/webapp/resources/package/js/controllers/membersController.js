app.controller("membersController",["$scope","teamFactory",function(e,t){e.members={},e.selectedMember={},e.$on("team",function(t,m){e.members=m.members}),e.$on("member",function(t,m){e.selectedMember=angular.copy(m)}),e.getTemplate=function(t){return t.id===e.selectedMember.id?"editMember":"displayMember"},e.edit=function(t){e.selectedMember=angular.copy(t)},e.addMember=function(){var t=e.$parent.team.id,m={teamId:t,name:"Name",position:"",seniority:"",involvement:100,vacancy:!1};e.members.push(m),e.selectedMember=angular.copy(m)},e.save=function(m){var r=e.$parent.team.id;e.members[m]=angular.copy(e.selectedMember),e.$parent.team.members=e.members,t.updateMember(e.selectedMember).success(function(m){t.getTeam(r).success(function(t){e.$parent.team=t})}),e.reset()},e.remove=function(m){var r=e.$parent.team.id,n=e.members;n.splice(n.indexOf(m),1),e.$parent.team.members=n,m.id&&t.deleteMember(m.id).success(function(m){t.getTeam(r).success(function(t){e.$parent.team=t})}),e.reset()},e.reset=function(t){if(e.valid())e.selectedMember={};else{var m=e.members;m.splice(m.indexOf(t),1),e.$parent.team.members=m}},e.valid=function(){return!(!e.selectedMember.seniority||!e.selectedMember.position||!e.selectedMember.name)}}]);